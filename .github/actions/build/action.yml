name: Build
description: Runs local tests, builds APKs, and uploads build artifacts.
inputs:
  gradle-cache-encryption-key:
    description: Gradle cache encryption key used by setup-gradle.
    required: false
runs:
  using: composite
  steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Copy CI gradle.properties
      run: mkdir -p ~/.gradle ; cp .github/ci-gradle.properties ~/.gradle/gradle.properties
      shell: bash

    - name: Set up JDKc 21
      uses: actions/setup-java@v5
      with:
        distribution: 'zulu'
        java-version: 21

   
    - name: Check build-logic
      run: ./gradlew :build-logic:convention:check
      shell: bash

    - name: Check spotless
      run: ./gradlew spotlessCheck
      shell: bash
